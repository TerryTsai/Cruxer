<!doctype html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <meta name='description' content='Cruxer - Social Routesetting'>
    <meta name='author' content='Terry Tsai'>
    <meta name='_csrf' th:content='${_csrf.token}' />
    <meta name='_csrf_header' th:content='${_csrf.headerName}' />
    <title>Cruxer</title>
    <link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family=Lato'>
    <link rel='stylesheet' type='text/css' href='css/reset.css'>
    <link rel='stylesheet' type='text/css' href='css/common.css'>
    <link rel='stylesheet' type='text/css' href='css/cruxer.css'>
    <link rel='stylesheet' type='text/css' href='css/simplegrid.css'>
    <link rel='stylesheet' type='text/css' href='css/spectrum.css'>
    <link rel="stylesheet" type='text/css' href="css/jquery-ui.min.css">
</head>

<body>
    <div th:replace='header :: header'></div>
    <section class='border-box pad-20'>

        <div class='w7-10 border-box left'>
            <canvas class='cruxer-canvas' id='cruxer-canvas'>
            </canvas>
        </div>

        <div class='w3-10 border-box left'>
            <input id='cruxer-color' type='text' class='w2-10 left'></input>
            <button id='cruxer-save' class='w2-10 right'>Save</button>
            <button id='cruxer-delete' class='w2-10 right'>Delete</button>
        </div>

        <div class='w3-10 border-box left' id="tabs">
            <ul>
                <li><a href="#walls-tab">Walls</a></li>
                <li><a href="#holds-tab">Holds</a></li>
            </ul>
            <div id="walls-tab">
                <div id='wall-list'></div>
            </div>
            <div id="holds-tab">
                <div id='hold-list'></div>
            </div>
        </div>

        <div class='w1-1' th:if='${id != null}'>
            <form style='width: 400px' id='comment-form'>
                <fieldset>
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <input type='hidden' name='id' th:value='${id}' />
                    <input type='hidden' name='type' value='route' />
                    <input type='text' name='comment' placeholder='Comment' />
                    <button id="submit" type="submit">Submit</button>
                </fieldset>
            </form>
            <div style='width: 400px' id='comment-list'></div>
        </div>

    </section>
    <!-- Jquery -->
    <script src='js/jquery-2.2.1.min.js'></script>
    <script src='js/jquery.mousewheel.min.js'></script>
    <script src="js/jquery.form.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src='js/moment.min.js'></script>
    <!-- ReactJS -->
    <script src='js/react.min.js'></script>
    <script src='js/react-dom.min.js'></script>
    <script src='js/browser.min.js'></script>
    <!-- Spectrum -->
    <script src='js/spectrum.js'></script>
    <!-- Babylon -->
    <script src='js/babylon.js'></script>
    <script src='js/hand.min.js'></script>
    <script src='js/babylon.objFileLoader.js'></script>
    <script src='js/customJoystick.js'></script>
    <script src='js/customJoystickCamera.js'></script>
    <script src='js/cruxer.js'></script>
    <script type='text/babel' src='jsx/HoldView.jsx'></script>
    <script type='text/babel' src='jsx/HoldListView.jsx'></script>
    <script type='text/babel' src='jsx/WallView.jsx'></script>
    <script type='text/babel' src='jsx/WallListView.jsx'></script>
    <script type='text/babel' src='jsx/CommentView.jsx'></script>
    <script type='text/babel' src='jsx/CommentListView.jsx'></script>
    <script type='text/babel'>
        ReactDOM.render(
        <HoldListView engine={engine}/>, document.getElementById('hold-list') ); ReactDOM.render(
        <WallListView engine={engine}/>, document.getElementById('wall-list') ); $('#tabs').tabs();
    </script>
    <script th:inline='javascript' th:if='${id != null}'>
    /*<![CDATA[*/
    var id = /*[[${id}]]*/ ;
    engine.engineImport(id);
    /*]]>*/
    </script>
    <script type='text/babel' th:if='${id != null}'>
        var commentList = ReactDOM.render(
        <CommentListView routeId={id}/>, document.getElementById('comment-list') ); $('#comment-form').ajaxForm({ url: "comments", type: "post", dataType: "json", success: function(r) { commentList.load(commentList.state.pg); }, error: function(r) { console.log(r); } });
    </script>
</body>

</html>